<form #candidateForm="ngForm" (ngSubmit)="onSubmit(candidateForm)">
  <div class="form-section1">
  <div class="form-section">
    <h2>Candidate Details</h2>

    <div class="form-row">
      <!-- Employee ID -->
      <div class="form-column">
        <label for="employeeId">Employee ID <span class="mandatory">*</span></label>
        <input type="text" id="employeeId" name="employeeId" ngModel required />
      </div>
    </div>
    
    <div class="form-row">
      <!-- Email -->
      <div class="form-column">
        <label for="email">Email ID <span class="mandatory">*</span></label>
        <input type="email" id="email" name="email" ngModel required />
      </div>
    
      <!-- Phone -->
      <div class="form-column">
        <label for="phone">Phone <span class="mandatory">*</span></label>
        <input type="tel" id="phone" name="phone" ngModel required />
      </div>
    </div>
    
    <div class="form-row">
      <!-- UAN Number -->
      <div class="form-column">
        <label for="uan">UAN Number</label>
        <input type="text" id="uan" name="uan" ngModel />
      </div>
    
      <!-- Aadhaar Card Number -->
      <div class="form-column">
        <label for="aadhaar">Aadhaar Card Number<span class="mandatory">*</span></label>
        <input type="text" id="aadhaar" name="aadhaar" ngModel required />
      </div>
    </div>
    
    <div class="form-row">
      <!-- PAN Card Number -->
      <div class="form-column">
        <label for="pan">PAN Card Number<span class="mandatory">*</span></label>
        <input type="text" id="pan" name="pan" ngModel required />
      </div>
    
      <!-- Photo -->
      <div class="form-column">
        <label for="photo">Photo</label>
        <input type="file" id="photo" name="photo" (change)="onFileChange($event)" />
      </div>
    </div>
    
    <div class="form-row">
      <!-- First Name -->
      <div class="form-column">
        <label for="firstName">First Name <span class="mandatory">*</span></label>
        <input type="text" id="firstName" name="firstName" ngModel required />
      </div>

      <!-- Last Name -->
      <div class="form-column">
        <label for="lastName">Last Name <span class="mandatory">*</span></label>
        <input type="text" id="lastName" name="lastName" ngModel required />
      </div>
    </div>

    <div class="form-row">
      <!-- Official Email -->
      <div class="form-column">
        <label for="officialEmail">Official Email</label>
        <input type="email" id="officialEmail" name="officialEmail" ngModel />
      </div>
    </div>

    <!-- Address Details (Present Address) -->
    <h3>Present Address</h3>
    <div class="form-row">
      <div class="form-column">
        <label for="presentAddress1">Address Line 1</label>
        <input type="text" id="presentAddress1" name="presentAddress1" ngModel />
      </div>

      <div class="form-column">
        <label for="presentAddress2">Address Line 2</label>
        <input type="text" id="presentAddress2" name="presentAddress2" ngModel />
      </div>
    </div>

    <div class="form-row">
      <!-- City -->
      <div class="form-column">
        <label for="city">City</label>
        <input type="text" id="city" name="city" ngModel required />
      </div>

      <!-- State -->
      <div class="form-column">
        <label for="state">Select State</label>
        <select
  id="state"
  name="state"
  [(ngModel)]="presentAddress.state"
  (click)="preventFocusLoss($event)">
  <option *ngFor="let state of states" [value]="state">{{ state }}</option>
</select>      
      </div>
    </div>

    <div class="form-row">
      <!-- Postal Code -->
      <div class="form-column">
        <label for="postalCode">Postal Code</label>
        <input type="text" id="postalCode" name="postalCode" ngModel required />
      </div>
    </div>

    <!-- Permanent Address -->
    <h3>Permanent Address</h3>
    <div class="form-row">
      <div class="form-column">
        <label for="permanentAddress1">Address Line 1</label>
        <input type="text" id="permanentAddress1" name="permanentAddress1" ngModel />
      </div>

      <div class="form-column">
        <label for="permanentAddress2">Address Line 2</label>
        <input type="text" id="permanentAddress2" name="permanentAddress2" ngModel />
      </div>
    </div>

    <div class="form-row">
      <!-- Permanent City -->
      <div class="form-column">
        <label for="permanentCity">City</label>
        <input type="text" id="permanentCity" name="permanentCity" ngModel required />
      </div>

      <!-- Permanent State -->
      <div class="form-column">
        <label for="permanentState">Select State</label>
        <select id="permanentState" name="permanentState" [(ngModel)]="permanentAddress.state" required>
          <option *ngFor="let state of states" [value]="state">{{ state }}</option>
        </select>
        
      </div>
    </div>

    <div class="form-row">
      <!-- Permanent Postal Code -->
      <div class="form-column">
        <label for="permanentPostalCode">Postal Code</label>
        <input type="text" id="permanentPostalCode" name="permanentPostalCode" ngModel required />
      </div>
    </div>

    <div class="form-row">
      <div class="form-column">
        <label for="sameAsPresent">
          <input type="checkbox" id="sameAsPresent" name="sameAsPresent" [(ngModel)]="sameAsPresentAddress" (change)="toggleAddress()"/> Same as Present Address
        </label>        
      </div>
    </div>
  </div>

  <!-- Education Section -->
  <div class="form-section">
    <h3>Education</h3>
    <button type="button" (click)="addEducation()">Add Row</button>
    <table>
      <tr>
        <th>Institution Name</th>
        <th>Qualification</th>
        <th>Register No</th>
        <th>Percentage</th>
        <th>Duration</th>
        <th>Field(s) of Study</th>
        <th>Year of Graduation</th>
        <th>Additional Notes</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let edu of educationList; let i = index">
        <td><input type="text" [(ngModel)]="edu.institutionName" name="institutionName{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.qualification" name="qualification{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.registerNo" name="registerNo{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.percentage" name="percentage{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.duration" name="duration{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.fieldOfStudy" name="fieldOfStudy{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.yearOfGraduation" name="yearOfGraduation{{i}}" /></td>
        <td><input type="text" [(ngModel)]="edu.additionalNotes" name="additionalNotes{{i}}" /></td>
        <td>
          <button type="button" (click)="removeEdu(i)" class="icon-button delete-icon">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    </table>
  </div>

  <!-- Experience Section -->
  <!-- <div class="form-section">
    <h3>Experience</h3>
    <button type="button" (click)="addExperience()">Add Row</button>
    <table>
      <tr>
        <th>Occupation</th>
        <th>Company</th>
        <th>Summary</th>
        <th>Duration</th>
        <th>Currently Work Here</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let exp of experienceList; let i = index">
        <td><input type="text" [(ngModel)]="exp.occupation" name="occupation{{i}}" /></td>
        <td><input type="text" [(ngModel)]="exp.company" name="company{{i}}" /></td>
        <td><input type="text" [(ngModel)]="exp.summary" name="summary{{i}}" /></td>
        <td><input type="text" [(ngModel)]="exp.duration" name="duration{{i}}" /></td>
        <td><input type="checkbox" [(ngModel)]="exp.currentlyWorkHere" name="currentlyWorkHere{{i}}" /></td>
        <td>
          <button type="button" (click)="removeExp(i)"class="icon-button delete-icon">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    </table>
  </div> -->

  <!-- Professional Details Section -->
  <div class="form-section">
    <h3>Professional Details</h3>
    <button type="button" (click)="addProfessional()">Add Row</button>
    <table>
      <tr>
        <th>EXP ID</th>
        <th>Organization</th>
        <th>Location</th>
        <th>Org Emp ID</th>
        <th>Org Dept</th>
        <th>Org Role</th>
        <th>Joining Date</th>
        <th>Relieving Date</th>
        <th>CTC</th>
        <th>Additional Information</th>
        <th>Offer Letter</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let prof of professionalList; let i = index">
        <td><input type="text" [(ngModel)]="prof.expId" name="expId{{i}}" /></td>
        <td><input type="text" [(ngModel)]="prof.organization" name="organization{{i}}" /></td>
        <td><input type="text" [(ngModel)]="prof.location" name="location{{i}}" /></td>
        <td><input type="text" [(ngModel)]="prof.orgEmpId" name="orgEmpId{{i}}" /></td>
        <td><input type="text" [(ngModel)]="prof.orgDept" name="orgDept{{i}}" /></td>
        <td><input type="text" [(ngModel)]="prof.orgRole" name="orgRole{{i}}" /></td>
        <td>
          <input type="date" [(ngModel)]="prof.joiningDate" name="joiningDate{{i}}" />
        </td>
        <td>
          <input type="date" [(ngModel)]="prof.relievingDate" name="relievingDate{{i}}" />
        </td>
        <td><input type="text" [(ngModel)]="prof.ctc" name="ctc{{i}}" /></td>
        <td>
          <textarea [(ngModel)]="prof.additionalInfo" name="additionalInfo{{i}}"></textarea>
        </td>
        <td>
          <input
            type="file"
            (change)="uploadOfferLetter($event, i)"
            name="offerLetter{{i}}"
          />
        </td>
        <td>
          <button type="button" (click)="removeProfessional(i)" class="icon-button delete-icon">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    </table>
    
  </div>
  <div class="form-section">
    <h3>Skill Set</h3>
    <button type="button" (click)="addSkill()">Add Row</button>
    <table>
      <tr>
        <th>Skill</th>
        <th>Proficiency</th>
        <th>Certification</th>
        <th>Years of Experience</th>
        <th>Last Update</th>
        <th>Actions</th>
      </tr>
      <tr *ngFor="let skill of skillList; let i = index">
        <td><input type="text" [(ngModel)]="skill.skill" name="skill{{i}}" /></td>
        <td>
          <select [(ngModel)]="skill.proficiency" name="proficiency{{i}}">
            <option value="" disabled selected>Select</option>
            <option value="Beginner">Beginner</option>
            <option value="Intermediate">Intermediate</option>
            <option value="Advanced">Advanced</option>
            <option value="Expert">Expert</option>
          </select>
        </td>
        <td><input type="text" [(ngModel)]="skill.certification" name="certification{{i}}" /></td>
        <td><input type="text" [(ngModel)]="skill.yearsExperience" name="yearsExperience{{i}}" /></td>
        <td><input type="date" [(ngModel)]="skill.lastUpdate" name="lastUpdate{{i}}" /></td>
        <td>
          <button type="button" (click)="removeSkill(i)" class="icon-button delete-icon">
            <i class="fas fa-trash"></i>
          </button>
        </td>
      </tr>
    </table>
  </div>

  <!-- Submit Button -->
  <div class="form-actions">
    <!-- [disabled]="!candidateForm.form.valid" -->
    <button type="submit">Submit </button>
    <button type="button" (click)="cancelAction()">Cancel</button>
  </div>
  </div>
</form>
